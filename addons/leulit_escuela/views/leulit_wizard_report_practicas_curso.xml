<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record model="ir.ui.view" id="leulit_20211012_1347_form">
            <field name="name">leulit_20211012_1347_form</field>
            <field name="model">leulit.wizard_report_practicas_curso</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Informe">
                    <group>
                        <field name="alumno" readonly="1"/>
                        <field name="cursos" domain="[('alumno_id','=',alumno),('cursos_perfil_formacion','=',False)]">
                            <tree string="Cursos" create="false" edit="false">
                                <field name="curso_id"/>
                                <field name="alumno_id" column_invisible="1"/>
                                <field name="cursos_perfil_formacion" column_invisible="1"/>
                            </tree>
                        </field>                        
                    </group>
                    <footer>
                        <button name="imprimir" type="object" string="Imprimir"  class="oe_highlight"/>
                    </footer>
                </form>
            </field>
        </record>


        <report string="Informe clases prácticas"
            id="wizard_report_practicas_curso_report"
            model="leulit.wizard_report_practicas_curso"
            name="leulit_escuela.leulit_20211012_1459_informe"
            report_type="qweb-pdf"
            paperformat="leulit.paperformat_A4_landscape_2"/>


        <template id="informe_practicas_css">
            <style>
                .literal {
                    font-weight: bold;
                }
                .theadtitle {
                    font-weight: bold;
                    font-size: 12px;
                    text-transform: uppercase;
                }
                .centertext {
                	text-align:center;
                }
                .lefttext {
                	text-align:left;
                }
                .righttext {
                	text-align:right;
                }         
                .bgcolored {
                    background-color: rgba(0,0,0,0.5);
                    color: #ffffff;
                }     
                table.noborde, table.noborde tr, table.noborde td, table.noborde th {
                    border: none;
                    padding: 5px;
                }
                table.border1, table.border1 tr, table.border1 td, table.border1 th {
                    border:thin solid #000000;
                    text-align:center;
                    border-collapse: collapse;
                    border-spacing: 0;
                    font-size: 12px;
                    padding: 5px;
                }
            </style>
        </template>


        <template id="informe_practicas_cabecera">
            <div class="header" style="border:1px solid #000000">
                <div class="row">
                    <div class="col-3">
                        <t t-if="firmado">
                            <div class="row">
                                <div class="col-12 lh-sm">
                                    <i><span style="font-size:10px">Firmado por: <span t-if="firmado_por" t-esc="firmado_por"/></span></i>
                                    <br style="display: block;margin-bottom: 2px;margin-top: 2px;font-size:2px;line-height: 2px;"/>
                                    <i><span style="font-size:10px">Código CSV/CID: <span t-esc="hashcode"/></span></i>                                                
                                    <br style="display: block;margin-bottom: 2px;margin-top: 2px;font-size:2px;line-height: 2px;"/>
                                    <span style="font-size:10px">(c) Helipistas</span>
                                </div>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="row">
                                <div class="col-12">
                                    <i><span style="font-size:10px">Documentación para uso interno.</span></i>
                                    <br style="display: block;margin-bottom: 2px;margin-top: 2px;font-size:2px;line-height: 2px;"/>
                                    <span style="font-size:10px">(c) Helipistas</span>
                                </div>
                            </div>
                        </t>
                    </div>
                    <div class="col-6 text-center">
                        <span style="font-size:20px; margin-right:20px"><b>C L A S E S</b></span>
                        <span style="font-size:20px"><b>P R Á C T I C A S</b></span>
                        <br style="display: block;margin-bottom: 2px;margin-top: 2px;font-size:2px;line-height: 2px;"/>
                        <span t-if="alumno_nombre" t-esc="alumno_nombre"/>
                        <br style="display: block;margin-bottom: 2px;margin-top: 2px;font-size:2px;line-height: 2px;"/>
                        <span style="font-size:8px">Cualquier copia total o parcial de este documento se considera copia no controlada y siempre deberá ser contrastada con la información vigente en la intranet. (https://erp.helipistas.com/verifycsv)</span>
                    </div>
                    <div class="col-3">
                        <table align="right" style="margin-bottom:10px;margin-top:10px" class="noborde">
                            <tr>
                                <td style="white-space: nowrap; padding: 5px;"><b>Código:</b></td>
                                <td style="white-space: nowrap; padding: 5px;">HLP-DOC-0007</td>
                                <td style="white-space: nowrap; padding: 5px;"><b>Versión:</b></td>
                                <td style="white-space: nowrap; padding: 5px;">3.1.0</td>
                            </tr>
                        </table>                
                    </div>
                </div>
            </div>
        </template>


        <template id="leulit_20211012_1459_informe">
            <t t-call="web.html_container">  
                <t t-set="data_report_margin_top" t-value="25"/>
                <t t-set="data_report_header_spacing" t-value="15"/>
                <t t-set="data_report_dpi" t-value="110"/>                     
                <t t-set="cursos" t-value="0" />           
                <t t-call="leulit_escuela.informe_practicas_cabecera"/>          
                <t t-foreach="datos" t-as="curso">                             
                    <t t-if="cursos > 0">
                        <div style="page-break-after: always;"/>
                        <t t-call="leulit_escuela.informe_teoricas_cabecera"/> 
                    </t>
                    <div class="article">                      
                        <t t-call="leulit_escuela.informe_practicas_css"/>  
                        <t t-if="cursos == 0">                        
                            <table style="width:100%" class="border1">
                                <thead>
                                    <tr>
                                        <th class="literal centertext bgcolored titleheight" style="vertical-align:middle" colspan="11">Curso</th>
                                        <th class="literal centertext bgcolored titleheight" colspan="2">Horas</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="datos" t-as="curso2">
                                        <tr>
                                            <th  colspan="11" class="lefttext" style="width:100%"><span t-esc="curso2['curso']"/></th>
                                            <th  colspan="2"><span t-esc="curso2['horasrecibidas']"/></th>
                                        </tr>
                                    </t>    
                                </tbody>
                            </table>
                            <div class="footer text-right" style="margin:0px; padding:0px;font-size:12px;">    
                                <span class="page"/> / <span class="topage"/>
                            </div>
                            <div style="page-break-after: always;"/>
                        </t>
                        <table class="border1">
                            <thead>
                                <tr>
                                    <th class="literal text-left bgcolored titleheight" colspan="13"><span t-esc="curso['curso']"/></th>
                                </tr>
                                <tr>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Código</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Fecha</th>
                                    <th class="literal centertext bgcolored titleheight" colspan="2">Despegue</th>
                                    <th class="literal centertext bgcolored titleheight" colspan="2">Aterrizaje</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Doble mando</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Tiempo Servicio</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Matrícula</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Aterrizajes</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2" style="width:100%">Silabus</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Instructor</th>
                                    <th class="literal centertext bgcolored titleheight" rowspan="2">Alumno</th>
                                </tr>
                                <tr>
                                    <th class="literal centertext bgcolored titleheight">Lugar</th>
                                    <th class="literal centertext bgcolored titleheight">Hora</th>
                                    <th class="literal centertext bgcolored titleheight">Lugar</th>
                                    <th class="literal centertext bgcolored titleheight">Hora</th>
                                </tr>
                            </thead>
                            <tbody class="maintable">
                                <t t-foreach="curso['vuelos']" t-as="vuelo">
                                    <tr style="page-break-inside: avoid ">
                                        <td nowrap="1"><span t-esc="vuelo['codigo']"/></td>
                                        <td nowrap="1"><span t-esc="vuelo['fechavuelo']"/></td>
                                        <td><span t-esc="vuelo['lugarsalida']"/></td>
                                        <td><span t-esc="vuelo['strhorasalida']"/></td>
                                        <td><span t-esc="vuelo['lugarllegada']"/></td>
                                        <td><span t-esc="vuelo['strhorallegada']"/></td>
                                        <td><span t-if="vuelo['doblemando']">Sí</span></td>
                                        <td><span t-esc="vuelo['strtiemposervicio']"/></td>
                                        <td><span t-esc="vuelo['matricula']"/></td>
                                        <td><span t-esc="vuelo['landings']"/></td>
                                        <td class="text-left" style="width:100%"><i>Silabus:</i><br/><span t-raw="vuelo['silabus']"/><hr style="margin-top: 5px; margin-bottom: 5px"/>
                                            <i>Comentario:</i> <span t-esc="vuelo['comentario']"/><hr style="margin-top: 5px; margin-bottom: 5px"/>
                                            <i>Valoración:</i> <span t-esc="vuelo['valoracion']"/></td>
                                        <td style="vertical-align:middle"><i><span t-esc="vuelo['instructor']"/></i></td>
                                        <td style="vertical-align:middle"><i><span t-esc="vuelo['nombrealumno']"/></i></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>                    
                        <t t-set="cursos" t-value="cursos+1" />
                        <div class="footer text-right" style="margin:0px; padding:0px;font-size:12px;">    
                            <span class="page"/> / <span class="topage"/>
                        </div>
                    </div>
                </t>
            </t>
        </template>


    </data>
</odoo>