<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="leulit_20200908_1552_filter" model="ir.ui.view">
            <field name="name">leulit_20200908_1552_filter</field>
            <field name="model">leulit.parte_escuela</field>
            <field name="arch" type="xml">
                <search string="partes escuela filtros">
                    <field name="id"/>
                    <field name="vuelo_id"/>
                    <field name="estado"/>
                    <field name="name"/>
                    <field name="profesor"/>
                    <field name="alumnos"/>
                    <field name="cursos"/>
                    <separator/>
                    <filter string="Archivado" name="inactivo" domain="[('active','=',False)]"/>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="leulit_20200908_1552_form">
            <field name="name">leulit_20200908_1552_form</field>
            <field name="model">leulit.parte_escuela</field>
            <field name="arch" type="xml">
                <form string="Parte teóricas" >
                    <header>
                        <field name="estado" widget="statusbar"/>
                        <button name="wkf_act_cancelado" type="object" string="Cancelar"  invisible="estado in ('cerrado', 'cancelado')"  class="oe_edit_only oe_highlight" confirm="Estás seguro de querer cancelar este parte de escuela?"/>
                        <button name="wkf_act_cerrado" type="object" string="Cerrar"  invisible="estado in ('cerrado', 'cancelado')"  class="oe_edit_only oe_highlight"/>
                    </header>
                    <sheet>
                        <field name="isreadonly" invisible="1"/>
                        <field name="active" invisible="1"/>
                        <field name="uid_responsable" invisible="1"/>
                        <group col="1" class="oe_edit_only">
                            <h3>IMPORTANTE:</h3>
                            <H4>Una vez cumplimentados todos los datos es necesario pulsar el botón cerrar para que se registre a efectos de tiempo de trabajo la clase realizada.</H4>
                        </group>
                        <group col="2">
                            <field name="id" readonly="1"/>
                            <field name="name"  readonly="((isreadonly == 'True'))" />
                            <field name="vuelo_id" options="{'limit': 10, 'create': false, 'create_edit': false}"  invisible="((not vuelo_id))" readonly="((isreadonly == 'True'))"/>
                        </group>
                        <group col="2">
                            <group col="1">
                                <h3>Profesor</h3>
                                <field name="profesor" options="{'no_create': True, 'edit': False, 'no_open':true}"  readonly="((vuelo_id) or (isreadonly == 'True'))"  nolabel="1"/>
                                <field name="profesor_foto" readonly="1" widget="image" class="oe_avatar oe_left" nolabel="1"/>
                            </group>
                            <group col="1">
                                <h3>Profesor adjunto</h3>
                                <field name="profesoradjunto" options="{'no_create': True, 'edit': False, 'no_open':true}"  readonly="((vuelo_id) or (isreadonly == 'True'))"  nolabel="1"/>
                                <field name="profesor_adjunto_foto" readonly="1" widget="image" class="oe_avatar oe_left" nolabel="1"/>
                            </group>
                        </group>
                        <group col="2">
                            <field name="comentario"/>
                            <field name="fase_vuelo"  readonly="((vuelo_id) or (isreadonly == 'True'))" />
                        </group>
                        <group col="3">
                            <group col="2">
                                <field name="fecha"  readonly="((vuelo_id) or (isreadonly == 'True'))" />
                                <field name="presencial"  readonly="((vuelo_id) or (isreadonly == 'True'))" />
                            </group>
                            <group col="2">
                                <field name="hora_start" widget="float_time" required="1"  readonly="((vuelo_id) or (isreadonly == 'True'))" />
                                <field name="hora_end" string="Hora fin" widget="float_time"  required="1"  readonly="((vuelo_id) or (isreadonly == 'True'))" />
                            </group>
                            <group col="2">
                                <field name="tiempo" widget="float_time" custom-readonly="1"  readonly="((vuelo_id) or (isreadonly == 'True'))"  />
                                <field name="valoracion" class="disableKeyboard"  readonly="((isreadonly == 'True'))" />
                            </group>
                        </group>
                        <notebook>
                            <page name="rel_curso_alumno" string="Silabus">
                                <separator string="Curso-Silabus-Alumnos (1)"/>
                                <button name="metodo_a_ejecutar" style="margin-right:10px" type="object" string="Añadir" context="{'default_parte_escuela_id': id, 'parte_escuela': True}" class="oe_edit_only oe_highlight"  invisible="((vuelo_id) or (isreadonly == 'True'))" />
                                <button name="verficar_por_orden" style="margin-right:10px" type="object" string="Verificar por orden" context="{'default_parte_escuela_id': id, 'parte_escuela': True}" class="oe_highlight" groups="leulit_escuela.REscuela_responsable"/>
                                <button name="wizard_change_data" style="margin-right:10px" type="object" string="Cambiar Datos Silabus" class="oe_highlight" groups="leulit.ROperaciones_gestor"/>
                                <button name="updateTiempos" type="object" string="Recalcular Tiempos" class="oe_highlight" groups="leulit.ROperaciones_gestor"/>
                                <field name="rel_curso_alumno" nolabel="1"  readonly="((isreadonly == 'True'))" >
                                    <tree create="false" editable="bottom" decoration-success="todo_cerrar==False" decoration-warning="todo_cerrar==True">
                                        <field name="verificado" readonly="1"/>
                                        <field name="verificado_por" readonly="1"/>
                                        <field name="rel_curso" readonly="1"/>
                                        <field name="rel_silabus" readonly="1" style="width:1%% !important;"/>
                                        <field name="alumno" readonly="1"/>
                                        <field name="duracion" widget="float_time" string="T. Teórico" readonly="1"/>
                                        <field name="tiempo" widget="float_time" string="T. Dedicado" readonly="1" force_save="1"/>
                                        <field name="sil_test" column_invisible="1"/>
                                        <field name="sil_valoracion" column_invisible="1"/>
                                        <field name="todo_cerrar" column_invisible="1"/>
                                        <field name="rel_docs" inviscolumn_invisibleible="1"/>
                                        <field name="valoracion"  column_invisible="((not sil_valoracion))" />
                                        <field name="nota"  column_invisible="((not sil_test))" />
                                        <button type="object" name="add_docs_rel_parte_escuela" class="oe_highlight" string="Adjuntar Doc."  column_invisible="((not sil_test))" />
                                    </tree>
                                </field>
                            </page>
                            <page name="page_presupuestos_esuela" string="Presupuestos">
                                <field name="presupuestos"  readonly="((vuelo_id) or (isreadonly == 'True'))" >
                                    <tree>
                                        <field name="name" string="Order Number"/>
                                        <field name="date_order"/>
                                        <field name="partner_id"/>
                                        <field name="user_id"/>
                                        <field name="amount_total" sum="Total Tax Included"/>
                                        <field name="state"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="leulit_20200908_1552_tree">
            <field name="name">leulit_20200908_1552_tree</field>
            <field name="model">leulit.parte_escuela</field>
            <field name="arch" type="xml">
                <tree string="Silabus" decoration-danger="estado=='cancelado'" decoration-warning="silverificado == 'cerrado_no_validado'" decoration-success="silverificado == 'cerrado_y_validado'" >
                    <field name="id"/>
                    <field name="estado"/>
                    <field name="name" />
                    <field name="fecha"/>
                    <field name="tiempo" widget="float_time" sum="Total"/>
                    <field name="profesor"/>
                    <field name="silverificado" column_invisible="1"/>    
                </tree>
            </field>
        </record>


        <record id="leulit_20200908_1552_action" model="ir.actions.act_window">
            <field name="name">Partes escuela</field>
            <field name="res_model">leulit.parte_escuela</field>
            <field name="view_mode">tree,form</field>
        </record>
        <record id="leulit_20200908_1552_action_tree" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="leulit_20200908_1552_tree" />
            <field name="act_window_id" ref="leulit_20200908_1552_action" />
        </record>
        <record id="leulit_20200908_1552_action_form" model="ir.actions.act_window.view">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="leulit_20200908_1552_form" />
            <field name="act_window_id" ref="leulit_20200908_1552_action" />
        </record>



        <record model="ir.ui.view" id="leulit_20201021_1125_form">
            <field name="name">leulit_20201021_1125_form</field>
            <field name="model">leulit.parte_escuela</field>
            <field name="arch" type="xml">
                <form string="Parte teóricas" delete="false" create="false" edit="false" >
                    <header>
                        <field name="estado" widget="statusbar" class="oe_right"/>
                    </header>
                    <sheet>
                        <field name="uid_in_alumnos" invisible="1"/>
                        <field name="isreadonly" invisible="1"/>
                        <group col="1" class="oe_edit_only">
                            <h3>IMPORTANTE:</h3>
                            <H4>Una vez cumplimentados todos los datos es necesario pulsar el botón cerrar para que se registre a efectos de tiempo de trabajo la clase realizada.</H4>
                        </group>
                        <group col="8">
                            <group col="2" colspan="5">
                                <field name="id" readonly="1"/>
                                <field name="name" readonly="1"/>
                                <field name="vuelo_id" options="{'limit': 10, 'create': false, 'create_edit': false}" readonly="1"/>
                                <!-- <field name="teacher" invisible="1"/> -->
                                <field name="profesor" options="{'limit': 10, 'create': false, 'create_edit': false}" readonly="1" />
                                <field name="profesoradjunto" options="{'limit': 10, 'create': false, 'create_edit': false}" readonly="1" />
                                <field name="comentario" readonly="1"/>
                            </group>
                            <group col="2" colspan="3">
                                <field name="fecha" readonly="1"/>
                                <field name="hora_start" widget="float_time" readonly="1"/>
                                <field name="tiempo" widget="float_time" readonly="1"/>
                                <field name="hora_end" widget="float_time" class="disableKeyboard" readonly="1"/>
                                <field name="valoracion" readonly="1" class="disableKeyboard"/>
                            </group>
                            <separator/>
                        </group> 
                        <separator string="Curso-Silabus-Alumnos (2)"/>
                        <button name="verificar_alumno_all" type="object" class="oe_highlight" string="Verificar Todo"   invisible="silverificado_por_alumno" /> 
                        <field name="silverificado_por_alumno" invisible="1"/>
                        <group col="1" colspan="3">
                            <field name="domainSilabus" nolabel="1" style="width:100%%">
                            	<tree create="false" edit="false" limit="200">
                            		<button name="verificar_alumno" type="object" string="verificar" class="oe_highlight"  invisible="verificado" />
                            		<field name="id" column_invisible="1"/>
                            		<field name="verificado" width="1px" string=" "/>
                                    <field name="rel_curso" style="white-space:normal"/>
                                    <field name="rel_silabus" style="white-space:normal"/>
                                    <field name="alumno" column_invisible="1"/>
                                    <field name="tiempo" width="1px" widget="float_time" string="T. Dedicado"/>
                                </tree>
                            </field>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="leulit_20201021_1125_tree">
            <field name="name">leulit_20201021_1125_tree</field>
            <field name="model">leulit.parte_escuela</field>
            <field name="arch" type="xml">
                <tree string="Silabus" delete="false" create="false" decoration-warning="silverificado_por_alumno == False" decoration-success="silverificado_por_alumno == True">
                    <field name="id"/>
                    <field name="estado"/>
                    <field name="name" />
                    <field name="fecha"/>
                    <field name="tiempo" widget="float_time" sum="Total"/>
                    <field name="profesor"/>
                    <field name="uid_in_alumnos" column_invisible="1"/>
                    <field name="silverificado_por_alumno" column_invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="leulit_20201021_1102_action">
            <field name="name">Parte escuela</field>
            <field name="res_model">leulit.parte_escuela</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('uid_in_alumnos','=',True)]</field>
            <field name="view_ids"
                   eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('leulit_escuela.leulit_20201021_1125_tree')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('leulit_escuela.leulit_20201021_1125_form')})]"/>
        </record>        

    </data>
</odoo>