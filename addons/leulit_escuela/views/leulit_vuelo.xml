<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>


        <record id="leulit_20220127_1634_filter" model="ir.ui.view">
            <field name="name">leulit_20220127_1634_filter</field>
            <field name="model">leulit.vuelo</field>
            <field name="inherit_id" ref="leulit_operaciones.leulit_20230906_1505_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='piloto_id']" position="after">
                    <field name="alumno"/>
                </xpath>
            </field>
        </record>


        <record id="leulit_20220127_1634_filter_nueva_vista" model="ir.ui.view">
            <field name="name">leulit_20220127_1634_filter_nueva_vista</field>
            <field name="model">leulit.vuelo</field>
            <field name="inherit_id" ref="leulit_operaciones.leulit_20230906_1505_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='piloto_id']" position="after">
                    <field name="alumno"/>
                </xpath>
            </field>
        </record>


        <!-- Vista Nueva (Parte vuelo views branch) -->
        <record id="leulit_20231031_1048_form" model="ir.ui.view">
            <field name="name">leulit_20231031_1048_form</field>
            <field name="model">leulit.vuelo</field>
            <field name="inherit_id" ref="leulit_operaciones.leulit_20230906_1505_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='helicoptero_tipo']" position="after">
                    <field name="parte_escuela_id" invisible="1" />
                </xpath>
                <xpath expr="//field[@name='peso_piloto']" position="after">
                    <field name="peso_alumno" invisible="1" />
                </xpath>
                <xpath expr="//div[@name='foto-piloto']" position="before">
                    <group><field name="semaforo_pf_piloto" widget="semaforo_char"  invisible="semaforo_pf_piloto == 'N/A'" /></group>
                </xpath>
                <xpath expr="//div[@name='foto-operador']" position="before">
                    <group><field name="semaforo_pf_operador" widget="semaforo_char"  invisible="semaforo_pf_operador == 'N/A'" /></group>
                </xpath>
                <xpath expr="//div[@name='div_supervisor_vuelo']" position="before">
                    <div class="card m-2 flex-fill" style="min-width: 180px">
                        <h5 class="card-header text-white bg-dark">
                            <field name="doblemando" invisible="1"/>
                        Alumno</h5>
                        <div class="card-body p-3">
                            <field name="alumno"  invisible="(verificado)" readonly="estado in ('postvuelo', 'cerrado', 'cancelado')"  options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <span data-bs-toggle="collapse" href="#foto-alumno" role="button" aria-expanded="false" aria-controls="foto-alumno" class="text-primary fa fa-solid fa-camera px-2"/>
                            <br/>
                            <div class="collapse" colspan="4" id="foto-alumno" name="foto-alumno">
                                <field name="foto_alumno" widget="image" string="" style="text-align: center"  invisible="(verificado)" />
                            </div>
                        </div>
                    </div>
                </xpath>
                <xpath expr="//field[@name='foto_verificado']" position="attributes">
                    <attribute name="invisible">(alumno != False)</attribute>
                </xpath>
                <xpath expr="//field[@name='verificado']" position="attributes">
                    <attribute name="invisible">(alumno != False)</attribute>
                    <attribute name="readonly">(estado in ['postvuelo','cerrado','cancelado'])</attribute>
                </xpath>
                <xpath expr="//div[@id='datos_generales_parte_vuelo']" position="after">
                    <div class="card px-4 py-2 my-4"  invisible="estado_vista in ('cerrado', 'cancelado')" >
                        <separator string="Escuela"></separator>
                        <div class="d-flex flex-row flex-wrap">
                            <group style="max-width:50%;">
                                <button name="wizard_add_parte_escuela" type="object" string="Añadir Silabus"  invisible="estado in ('cancelado', 'cerrado')" readonly="estado in ('postvuelo', 'cerrado', 'cancelado')"  class="oe_highlight oe_edit_only"/>
                                <field name="silabus_ids" options="{'limit': 3}" string="Sílabus" no_label="1" colspan="2">
                                    <tree create="false" editable="bottom" decoration-success="todo_cerrar==False" decoration-warning="todo_cerrar==True">
                                        <field name="rel_curso"/>
                                        <field name="rel_silabus"/>
                                        <field name="sil_test" column_invisible="1"/>
                                        <field name="sil_valoracion" invisible="1"/>
                                        <field name="todo_cerrar" column_invisible="1"/>
                                        <field name="rel_docs" column_invisible="1"/>
                                        <field name="valoracion"  column_invisible="not sil_valoracion" />
                                        <field name="nota"  column_invisible="not sil_test" />
                                        <button type="object" name="add_docs_rel_parte_escuela" string="Adjuntar Doc."  column_invisible="not sil_test"  class="oe_edit_only oe_highlight"/>
                                    </tree>
                                </field>
                            </group>
                            <group style="max-width:40%;">
                                <field name="valoracion_escuela"  invisible="((estado_vista in ['prevuelo']))" readonly="((estado in ['cerrado', 'cancelado']))" />
                                <field name="comentario_escuela"  invisible="((estado_vista in ['prevuelo']))" readonly="((estado in ['cerrado', 'cancelado']))" />
                            </group>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>


        <!-- Vista resumen -->
        <record id="leulit_20231031_1048_form_vista_resumen" model="ir.ui.view">
            <field name="name">leulit_20231031_1048_form_vista_resumen</field>
            <field name="model">leulit.vuelo</field>
            <field name="inherit_id" ref="leulit_operaciones.leulit_20240313_1513_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='helicoptero_tipo']" position="after">
                    <field name="parte_escuela_id" invisible="1" />
                </xpath>
                <xpath expr="//field[@name='peso_piloto']" position="after">
                    <field name="peso_alumno" invisible="1" />
                </xpath>
                <xpath expr="//div[@name='div_supervisor_vuelo']" position="before">
                    <div class="card m-2 flex-fill" style="min-width: 180px">
                        <h5 class="card-header text-white bg-dark">
                            <field name="doblemando" invisible="1"/>
                        Alumno</h5>
                        <div class="card-body p-3">
                            <field name="alumno"  invisible="(verificado)" readonly="((estado in ['postvuelo', 'cerrado', 'cancelado']))"  options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <span data-bs-toggle="collapse" href="#foto-alumno" role="button" aria-expanded="false" aria-controls="foto-alumno" class="text-primary fa fa-solid fa-camera px-2"/>
                            <br/>
                            <div class="collapse" colspan="4" id="foto-alumno">
                                <field name="foto_alumno" widget="image" string="" style="text-align: center"  invisible="(verificado)" />
                            </div>
                        </div>
                    </div>
                </xpath>
                <xpath expr="//field[@name='foto_verificado']" position="attributes">
                    <attribute name="invisible">(alumno != False)</attribute>
                </xpath>
                <xpath expr="//field[@name='verificado']" position="attributes">
                    <attribute name="invisible">(alumno != False)</attribute>
                    <attribute name="readonly">(estado in ['postvuelo','cerrado','cancelado'])</attribute>
                </xpath>
                <xpath expr="//div[@id='datos_generales_parte_vuelo']" position="after">
                    <div class="card px-4 py-2 my-4"  invisible="((not alumno) and (not verificado))" >
                        <separator string="Escuela"></separator>
                        <div class="d-flex flex-row flex-wrap">
                            <group style="max-width:50%;">
                                <button name="wizard_add_parte_escuela" type="object" string="Añadir Silabus"  invisible="((estado in ['cancelado', 'cerrado']))" readonly="((estado in ['postvuelo', 'cerrado', 'cancelado']))"  class="oe_highlight oe_edit_only"/>
                                <field name="silabus_ids" options="{'limit': 3}" string="Sílabus" no_label="1" colspan="2">
                                    <tree create="false" editable="bottom" decoration-success="todo_cerrar==False" decoration-warning="todo_cerrar==True">
                                        <field name="rel_curso"/>
                                        <field name="rel_silabus"/>
                                        <field name="sil_test" column_invisible="1"/>
                                        <field name="sil_valoracion" in="1"/>
                                        <field name="todo_cerrar" column_invisible="1"/>
                                        <field name="rel_docs" column_invisible="1"/>
                                        <field name="valoracion"  column_invisible="((not sil_valoracion))" />
                                        <field name="nota"  column_invisible="((not sil_test))" />
                                        <button type="object" name="add_docs_rel_parte_escuela" string="Adjuntar Doc."  column_invisible="((not sil_test))"  class="oe_edit_only oe_highlight"/>
                                    </tree>
                                </field>
                            </group>
                            <group style="max-width:40%;">
                                <field name="valoracion_escuela"  readonly="((estado in ['cerrado', 'cancelado']))" />
                                <field name="comentario_escuela"  readonly="((estado in ['cerrado', 'cancelado']))" />
                            </group>
                        </div>
                    </div>
                </xpath>
            </field>
        </record>


    </data>
</odoo>