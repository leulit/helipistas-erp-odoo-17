<?xml version='1.0' encoding='utf-8'?>
<odoo>
    
    <record id="leulit_20230623_1633_form" model="ir.ui.view">
        <field name="name">leulit_20230623_1633_form</field>
        <field name="model">leulit.maintenance_crs</field>
        <field name="arch" type="xml">
            <form string="CRS" create="false">
                <header>
                    <button name="set_estado_firmado" string="Firmar IT" type="object" class="oe_highlight"  invisible="((estado != 'borrador'))"  groups="leulit.RolIT_developer"/>
                    <button name="set_estado_borrador" string="Pendiente IT" type="object" class="oe_highlight"  invisible="((estado == 'borrador'))"  groups="leulit.RolIT_developer"/>
                    <button name="set_estado_pendiente_firma" string="Firmar" type="object" class="oe_highlight"  invisible="((estado != 'borrador'))"  confirm="Al firmar este CRS, confirmará que ha supervisado todas las tareas realizadas. ¿Quiere firmar el CRS?"/>
                    <button name="print_crs" string="Imprimir" type="object" class="oe_highlight"/>
                    <field name="estado" widget="statusbar"/>
                </header>
                <sheet>
                    <field name="request" invisible="1"/>
                    <separator string="Datos Aeronave"/>
                    <group col="4">
                        <field name="helicoptero"  readonly="((estado != 'borrador'))" />
                        <field name="modelo"/>
                        <field name="fabricante"/>
                        <field name="serialnum"/>
                        <field name="horas_crs"  readonly="((estado != 'borrador'))" />
                        <field name="tso_crs"  readonly="((estado != 'borrador'))" />
                    </group>
                    <separator string="Datos Motor"/>
                    <group col="4">
                        <field name="motor" readonly="1"/>
                        <field name="marca_motor" readonly="1"/>
                        <field name="tsn_motor"  invisible="((not motor))" readonly="((estado != 'borrador'))" />
                        <field name="tso_motor"  invisible="((not motor))" readonly="((estado != 'borrador'))" />
                        <field name="tsn_motor_str"  invisible="((motor))" readonly="((estado != 'borrador'))" />
                        <field name="tso_motor_str"  invisible="((motor))" readonly="((estado != 'borrador'))" />
                    </group>
                    <separator string="Datos CRS"/>
                    <group>
                        <field name="tareas" readonly="estado != 'borrador'" />
                    </group>
                    <group>
                        <field name="limitaciones" options="{'no_create': True, 'create': False, 'edit': False, 'no_open':true}"  readonly="((estado != 'borrador'))"  required="1"/>
                    </group>
                    <group name="last_info_crs">
                        <field name="tipo_crs"  readonly="((estado != 'borrador'))" />
                        <field name="rev"/>
                        <field name="n_cas"/>
                        <field name="lugar"  readonly="((estado != 'borrador'))" />
                        <field name="fecha"  readonly="((estado != 'borrador'))" />
                        <field name="certificador" options="{'no_create': True, 'create': False, 'edit': False, 'no_open':true}"  readonly="((estado != 'borrador'))" />
                        <field name="ref_em"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    
    <record id="leulit_20230623_1633_tree" model="ir.ui.view">
        <field name="name">leulit_20230623_1633_tree</field>
        <field name="model">leulit.maintenance_crs</field>
        <field name="arch" type="xml">
            <tree string="CRS" create="false">
                <field name="tipo_crs"/>
                <field name="n_cas"/>
                <field name="lugar"/>
                <field name="fecha"/>
                <field name="certificador"/>
                <field name="ref_em"/>
                <field name="estado"/>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="leulit_20250207_1056_action">
        <field name="name">Listado de CRS</field>
        <field name="res_model">leulit.maintenance_crs</field>
        <field name="view_mode">tree,form</field>
    </record>
        

    <record id="leulit_mail_camo_crs_firmado" model="mail.template">
        <field name="name">Helipistas mail informa CRS firmado CAMO</field>
        <field name="email_from">erp@helipistas.com</field>
        <field name="email_to">${ctx.get('mail_to')}</field>
        <field name="model_id" ref="model_leulit_maintenance_crs" />
        <field name="auto_delete" eval="True" />
        <field name="subject">${ctx.get('subject')}</field>
        <field name="body_html"><![CDATA[
            <table>
                <tr>
                    <td>
                        CRS:
                    </td>
                    <td>
                        ${object.n_cas}
                    </td>
                </tr>
                <tr>
                    <td>
                        Work Order:
                    </td>
                    <td>
                        ${object.request.name}
                    </td>
                </tr>
            </table>
        ]]>
        </field>
    </record>


</odoo>