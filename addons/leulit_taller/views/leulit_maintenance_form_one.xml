<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        
        <record id="leulit_20230706_1118_form" model="ir.ui.view">
            <field name="name">leulit_20230706_1118_form</field>
            <field name="model">leulit.maintenance_form_one</field>
            <field name="arch" type="xml">
                <form string="Form One" create="false">
                    <header>
                        <button name="set_estado_firmado" string="Firmar IT" type="object" class="oe_highlight"  invisible="((estado != 'borrador'))"  groups="leulit.RolIT_developer"/>
                        <button name="set_estado_borrador" string="Pendiente IT" type="object" class="oe_highlight"  invisible="((estado == 'borrador'))"  groups="leulit.RolIT_developer"/>
                        <button name="set_estado_pendiente_firma" string="Firmar" type="object" class="oe_highlight"  invisible="((estado != 'borrador'))" />
                        <button name="print_form_one" string="Imprimir" type="object" class="oe_highlight"/>
                        <field name="estado" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group col="4">
                            <field name="tracking_number"  readonly="((estado != 'borrador'))" />
                            <field name="work_order_id"  readonly="((estado != 'borrador'))"  options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <field name="task_id"  readonly="((estado != 'borrador'))"  options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <field name="status_work"  readonly="((estado != 'borrador'))" />
                        </group>
                        <field name="items_ids"  readonly="((estado != 'borrador'))" >
                            <tree editable="bottom">
                                <field name="item"/>
                                <field name="pieza_id" options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                                <field name="qty"/>
                                <field name="move_created" column_invisible="1"/>
                                <field name="estado" column_invisible="1"/>
                                <button name="do_move_certificate" string="Movimiento certificado" type="object" class="oe_highlight"  invisible="estado == 'borrador' or move_created" />
                            </tree>
                        </field>
                        <group>
                            <field name="template_id" options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <field name="remarks" readonly="((estado != 'borrador'))" />
                        </group>
                        <group col="4" name="last_info_formone">
                            <field name="part_45"  readonly="((estado != 'borrador'))" />
                            <field name="certificador"  readonly="((estado != 'borrador'))"  options="{'no_create': True, 'edit': False, 'no_open':true}"/>
                            <field name="other_regulation"  readonly="((estado != 'borrador'))" />
                            <field name="fecha"  readonly="((estado != 'borrador'))" />
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
    
        <record id="leulit_20230706_1118_tree" model="ir.ui.view">
            <field name="name">leulit_20230706_1118_tree</field>
            <field name="model">leulit.maintenance_form_one</field>
            <field name="arch" type="xml">
                <tree string="Form One" create="false">
                    <field name="tracking_number"/>
                    <field name="work_order_id"/>
                    <field name="status_work"/>
                    <field name="fecha"/>
                    <field name="certificador"/>
                    <field name="estado"/>
                </tree>
            </field>
        </record>

	    <record model="ir.actions.act_window" id="leulit_20230706_1118_action">
            <field name="name">Forms One</field>
            <field name="res_model">leulit.maintenance_form_one</field>
            <field name="view_mode">tree,form</field>
        </record>
        

        <record id="leulit_mail_camo_formone_firmado" model="mail.template">
            <field name="name">Helipistas mail informa Form One firmado CAMO</field>
            <field name="email_from">erp@helipistas.com</field>
            <field name="email_to">${ctx.get('mail_to')}</field>
            <field name="model_id" ref="model_leulit_maintenance_form_one" />
            <field name="auto_delete" eval="True" />
            <field name="subject">${ctx.get('subject')}</field>
            <field name="body_html"><![CDATA[
                <table>
                    <tr>
                        <td>
                            Form One:
                        </td>
                        <td>
                            ${object.tracking_number}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Work Order:
                        </td>
                        <td>
                            ${object.work_order_id.name}
                        </td>
                    </tr>
                </table>
            ]]>
            </field>
        </record>


    </data>
</odoo>