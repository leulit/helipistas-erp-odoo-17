<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <record id="ir_cron_send_potencial_aeronaves_email" model="ir.cron">
            <field name="name">LEULIT - Enviar email del potencial de las aeronaves en el proximo mes</field>
            <field name="model_id" ref="model_calendar_event"/>
            <field name="state">code</field>
            <field name="code">model.potencial_aeronaves()</field>
            <field name="active" eval="False"/>
            <field name="interval_number">1</field>
            <field name="interval_type">months</field>
            <field name="numbercall" eval="-1"/>
        </record>

        <record id="email_template_potencial_aeronaves_event" model="mail.template">
            <field name="name">Notificación del potencial de las aeronaves del proximo mes</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="subject">Resumen Potencial Aeronaves</field>
            <field name="email_from">erp@helipistas.com</field>
            <field name="email_to">ops@helipistas.com</field>
            <field name="body_html"><![CDATA[
                <p>A continuación se detalla el potencial de las aeronaves para el próximo mes:</p>
                % for recurso, datos in ctx.get('email_values', {}).items():
                    <p><strong>Aeronave:</strong> ${recurso}</p>
                    <ul>
                        % for dato in datos:
                            <li>
                                % if dato['taller'] != '':
                                    <strong>${dato['taller']}</strong><br/>
                                % endif
                                <strong>Fecha:</strong> ${dato['fecha']}<br/>
                                <strong>Horas:</strong> ${dato['horas']}<br/>
                            </li>
                        % endfor
                    </ul>
                % endfor
            ]]></field>
        </record>

    </data>
</odoo>
